<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - Infectious Disease Tracker</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="h-screen w-screen flex overflow-hidden">
  <!-- Left Side -->
  <div class="w-1/2 bg-gradient-to-br from-indigo-600 to-purple-600 text-white p-12 flex flex-col justify-center">
    <h1 class="text-5xl font-extrabold mb-4">Welcome to CITS3403 Group Project Infectioning DIsease worldwide ðŸ‘‹</h1>
    <p class="text-lg">Our group is mainly targeting Covid-19 on uploaded csv file country with relevant intensity map and charts.</p>
    <footer class="absolute bottom-6 text-sm text-white/70">Â© 2025 InfectionApp. All rights reserved.</footer>
  </div>

  <!-- Right Side -->
  <div class="w-1/2 flex items-center justify-center bg-white p-8">
    <div class="w-full max-w-md">
      <h2 class="text-3xl font-bold mb-2">Welcome Back!</h2>
      <p class="text-sm mb-6 text-gray-600">Don't have an account? 
        <a href="#" id="toggleMode" class="text-blue-600 hover:underline">Create a new account now</a>
      </p>

      <input type="email" id="email" placeholder="Email" class="w-full p-3 mb-4 border border-gray-300 rounded" />
      <input type="password" id="password" placeholder="Password" class="w-full p-3 mb-4 border border-gray-300 rounded" />

      <button id="submitBtn" class="w-full bg-black text-white p-3 rounded mb-3 font-semibold">Login Now</button>

      <button class="w-full flex items-center justify-center gap-2 border border-gray-300 p-3 rounded text-gray-700">
        <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="h-5 w-5" alt="Google Icon" />
        Login with Google
      </button>

      <p class="text-sm text-right mt-4 text-gray-500">
        Forget password? <a href="#" class="text-blue-600 hover:underline">Click here</a>
      </p>
    </div>
  </div>

  <script>
    let isLogin = true;

    $('#toggleMode').click(function (e) {
      e.preventDefault();
      isLogin = !isLogin;
      $('#submitBtn').text(isLogin ? 'Login Now' : 'Sign Up Now');
      $(this).text(isLogin ? 'Create a new account now' : 'Already have an account? Log in');
    });

    $('#submitBtn').click(function () {
      const email = $('#email').val();
      const password = $('#password').val();
      const endpoint = isLogin ? '/login' : '/register';

      $.ajax({
        url: endpoint,
        type: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ email, password }),
        success: function (response) {
          alert(response.message);
          if (isLogin) window.location.href = '/home';
        },
        error: function (xhr) {
          alert(xhr.responseJSON?.message || 'An error occurred.');
        }
      });
    });
  </script>
</body>
</html>

{% extends "layout.html" %}

{% block title %}Plot Result{% endblock %}

{% block content %}
<h2 class="text-center mb-4">Map of Excess Deaths</h2>
<div class="text-center">
  
  <!-- Date picker or dropdown to select date -->
  <form method="POST" action="{{ url_for('main.map_view') }}">
    <label for="date">Select a Date:</label>
    <select name="date" id="date">
      {% for date in available_dates %}
        <option value="{{ date.strftime('%Y-%m-%d') }}" {% if date == selected_date %}selected{% endif %}>{{ date.strftime('%Y-%m-%d') }}</option>
      {% endfor %}
    </select>
    <button type="submit" class="btn btn-primary mt-3">Update Map</button>
  </form>
  
  <!-- Display map -->
  <iframe src="{{ url_for('static', filename=plot_url) }}" width="100%" height="900" frameborder="0" style="border: none;"></iframe>

  <br><br>
  <a href="{{ url_for('main.upload_page') }}" class="btn btn-outline-secondary mt-3">Upload Another File</a>
  <a href="{{ url_for('main.time_series') }}" class="btn btn-primary mt-3">View Time Series Graph</a>
  <a href="{{ url_for('main.map_view') }}" class="btn btn-primary mt-3">View Map</a>
</div>
{% endblock %}


{% extends "layout.html" %}

{% block title %}Plot Result{% endblock %}

{% block content %}
<h2 class="text-3xl font-bold text-center mb-8">Maps and Graphs of Data</h2>

<div class="flex flex-col gap-12 items-center">

    <!-- Toggleable Explanation Section -->
    <div x-data="{ showInfo: false }" class="w-full max-w-4xl mb-4">
        <button 
            @click="showInfo = !showInfo"
            class="mb-4 px-4 py-2 bg-yellow-400 text-black font-semibold rounded-md shadow hover:bg-yellow-500 transition"
        >
            What does this mean?
        </button>

        <div x-show="showInfo" x-transition class="bg-gray-100 p-6 rounded-lg shadow text-gray-800 text-sm leading-relaxed">
            <h3 class="text-lg font-bold mb-3">Understanding the Visualization</h3>

            {% if plot_type == 'map' %}
                <ul class="list-disc list-inside space-y-2">
                    <li><strong>Map View:</strong> Displays data values for the date selected in the slider bar (e.g., COVID cases, Monkeypox infections) by country. Darker shades indicate higher values.</li>
                    <li><strong>Animated Timeline:</strong> Use the slider to view changes over time.</li>
                    <li><strong>Hover:</strong> Displays the value and coutnry details.</li>
                </ul>
            {% elif plot_type == 'line' %}
                <ul class="list-disc list-inside space-y-2">
                    <li><strong>Line Chart:</strong> Tracks data trends over time across countries or regions.</li>
                    <li><strong>Dropdown:</strong> Use the filter to view individual country trends (e.g., COVID cases in the US).</li>
                </ul>
            {% elif plot_type == 'bar' %}
                <ul class="list-disc list-inside space-y-2">
                    <li><strong>Bar Chart:</strong> Displays average data values by region (e.g., average Monkeypox cases per country).</li>
                    <li>Useful for comparing total impact across countries or regions.</li>
                </ul>
            {% elif plot_type == 'pie' %}
                <ul class="list-disc list-inside space-y-2">
                    <li><strong>Pie Chart:</strong> Shows the top contributors to the total data (e.g., top 10 countries with the highest cumulative cases).</li>
                    <li>Proportions help visualize overall contributions to the total dataset.</li>
                </ul>
            {% else %}
                <p>This plot visualizes trends or distributions of the selected data. Hover or interact for details.</p>
            {% endif %}

            <p class="mt-4">Click “Upload Another File” to add new data, or return to the homepage.</p>
        </div>
    </div>

    <!-- Map View -->
    <div class="w-full max-w-6xl">
        <h3 class="text-2xl font-semibold mb-4 text-center">Map View</h3>
        <iframe src="{{ url_for('static', filename=plot_url) }}" width="100%" height="600" frameborder="0" style="border: none;"></iframe>
    </div>

    <!-- Buttons -->
    <div class="flex justify-center gap-4 mt-8">
      <a href="{{ url_for('main.upload_page') }}" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Upload Another File</a>
      <a href="{{ url_for('main.index') }}" class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition">Return to Home</a>
    </div>

</div>
{% endblock %}

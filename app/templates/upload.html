{% extends "layout.html" %}

{% block title %}Upload CSV{% endblock %}

{% block content %}
  <h1 class="text-3xl font-semibold mb-6">Upload CSV File</h1>

  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="max-w-xl mx-auto space-y-2 mb-6">
      {% for category, message in messages %}
      {% if 'upload' in category %} 
        <div class="flex items-center justify-between p-4 rounded-md text-white shadow-md transition-all duration-300 
            {{ 'bg-green-600' if category == 'success' else 
               'bg-red-600' if category == 'error' else 
               'bg-yellow-600' if category == 'warning' else 
               'bg-blue-600' }}">
          <span>{{ message }}</span>
          <button onclick="this.parentElement.remove()" class="ml-4 text-white font-bold">Ã—</button>
        </div>
        {% endif %}
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

  <form action="{{ url_for('main.upload') }}" method="POST" enctype="multipart/form-data" class="bg-white p-6 rounded-lg shadow-lg">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
   
    <div class="mb-4">
      <input type="file" name="file" accept=".csv" required class="w-full p-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>
    <button type="submit" class="w-full py-3 mt-4 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Upload</button>
  </form>
  <!-- Buttons -->
<div class="flex justify-center gap-4 mt-8">
  <a href="{{ url_for('main.index') }}" class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition">Return to Home</a>
</div>
{% endblock %}

{% extends "layout.html" %}

{% block title %}Plot Result{% endblock %}

{% block content %}
<h2 class="text-3xl font-bold text-center mb-8">Maps and Graphs of Excess Deaths</h2>

<div class="flex flex-col gap-12 items-center">

    <!-- Toggleable Explanation Section -->
    <div x-data="{ showInfo: false }" class="w-full max-w-4xl mb-4">
        <button 
            @click="showInfo = !showInfo"
            class="mb-4 px-4 py-2 bg-yellow-400 text-black font-semibold rounded-md shadow hover:bg-yellow-500 transition"
        >
            What does this mean?
        </button>

        <div x-show="showInfo" x-transition class="bg-gray-100 p-6 rounded-lg shadow text-gray-800 text-sm leading-relaxed">
            <h3 class="text-lg font-bold mb-3">Understanding the Visualisation</h3>
            <ul class="list-disc list-inside space-y-2">
                <li>
                    <strong>Map View:</strong> Visualizes cumulative excess deaths per 100,000 people. Darker colors represent higher values.
                </li>
                <li>
                    <strong>Animated Timeline:</strong> Use the timeline slider below the map to explore how excess deaths changed over time.
                </li>
                <li>
                    <strong>Hover for Details:</strong> Hovering over a country shows:
                    <ul class="ml-5 list-disc">
                        <li>Excess deaths (central estimate)</li>
                        <li>Lower/upper 95% confidence bounds</li>
                        <li>Confirmed COVID-19 deaths per 100,000</li>
                    </ul>
                </li>
                <li>
                    Click “Upload Another File” to add new data, or return to the homepage.
                </li>
            </ul>
        </div>
    </div>


    <!-- Map View -->
    <div class="w-full max-w-6xl">
        <h3 class="text-2xl font-semibold mb-4 text-center">Map View</h3>
        <iframe src="{{ url_for('static', filename=plot_url) }}" width="100%" height="600" frameborder="0" style="border: none;"></iframe>
    </div>

    <!-- Buttons -->
    <div class="flex justify-center gap-4 mt-8">
      <a href="{{ url_for('main.upload_page') }}" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Upload Another File</a>
      <a href="{{ url_for('main.index') }}" class="px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition">Return to Home</a>
    </div>


</div>
{% endblock %}
